# Test cases on printers with quad independent extruders
DICTIONARY stm32h723.dict extboard=stm32h723.dict
CONFIG generic_cartesian_iqex.cfg

# First home the printer
G90
M83
G28

# Perform a dummy move
G1 X10 Y20 Z10 F6000
G1 X11 E0.1 F3000

# Test other tools
T1
G1 X120 Y50 F6000
G1 X119 E0.1 F3000

T2
G1 X200 Y70 F6000
G1 X199 E0.1 F3000

T3
G1 X70 Y50 F6000
G1 X71 E0.1 F3000

# Go back to main tool
T0
G1 X20 Y100 F6000

# Save dual carriage state
SAVE_DUAL_CARRIAGE_STATE

G1 Y100 F6000

T2
# Activate the dual carriage on Y axis
SET_DUAL_CARRIAGE CARRIAGE=carriage_gantry1_left
G1 X10 Y150 F6000

# Restore dual carriage state
RESTORE_DUAL_CARRIAGE_STATE

QUERY_ENDSTOPS

# Configure input shaper
SET_DUAL_CARRIAGE CARRIAGE=carriage_gantry1_left
SET_DUAL_CARRIAGE CARRIAGE=carriage_t3
SET_INPUT_SHAPER SHAPER_TYPE_X=ei SHAPER_FREQ_X=50 SHAPER_TYPE_Y=2hump_ei SHAPER_FREQ_Y=80
SET_DUAL_CARRIAGE CARRIAGE=carriage_t2
SET_INPUT_SHAPER SHAPER_TYPE_X=ei SHAPER_FREQ_X=45 SHAPER_TYPE_Y=2hump_ei SHAPER_FREQ_Y=80
SET_DUAL_CARRIAGE CARRIAGE=carriage_gantry0_left
SET_DUAL_CARRIAGE CARRIAGE=carriage_t1
SET_INPUT_SHAPER SHAPER_TYPE_X=mzv SHAPER_FREQ_X=50 SHAPER_TYPE_Y=2hump_ei SHAPER_FREQ_Y=70
SET_DUAL_CARRIAGE CARRIAGE=carriage_t0
SET_INPUT_SHAPER SHAPER_TYPE_X=zvd SHAPER_FREQ_X=55 SHAPER_TYPE_Y=2hump_ei SHAPER_FREQ_Y=70

T0
G1 X100 Y150 F6000

SET_COPY_MODE
G1 X10 Y10 F6000
G1 X11 E0.1 F3000

SET_MIRROR_MODE1
G1 X10 Y10 F6000
G1 X11 E0.1 F3000

SET_MIRROR_MODE2
G1 X10 Y10 F6000
G1 X11 E0.1 F3000

DISABLE_T0
G1 X12 E0.1
DISABLE_T2
G1 X13 E0.1
DISABLE_T3
G1 X14 E0.1
